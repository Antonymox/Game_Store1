<!doctype html>
<html lang="es" class="retro-theme">
<head>
  <meta charset="utf-8">
  <title>GameStore - Tu Tienda de Videojuegos Retro y Modernos</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Descubre los mejores videojuegos retro y modernos en GameStore. Compra juegos clásicos y nuevos lanzamientos con envío rápido y precios increíbles.">
  <meta name="keywords" content="videojuegos, tienda de juegos, juegos retro, juegos modernos, comprar videojuegos, game store, gaming">
  <meta name="author" content="GameStore">
  <meta name="robots" content="index, follow">
  <meta name="language" content="Spanish">
  <meta name="revisit-after" content="7 days">
  <meta name="theme-color" content="#220033">
  
  <!-- Open Graph Meta Tags (Facebook, LinkedIn) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="GameStore - Tu Tienda de Videojuegos">
  <meta property="og:description" content="Descubre los mejores videojuegos retro y modernos. Compra juegos clásicos y nuevos lanzamientos con envío rápido.">
  <meta property="og:url" content="https://gamestore.com">
  <meta property="og:site_name" content="GameStore">
  <meta property="og:image" content="https://gamestore.com/assets/og-image.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="es_ES">
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="GameStore - Tu Tienda de Videojuegos">
  <meta name="twitter:description" content="Descubre los mejores videojuegos retro y modernos. Compra juegos clásicos y nuevos lanzamientos.">
  <meta name="twitter:image" content="https://gamestore.com/assets/twitter-card.jpg">
  <meta name="twitter:site" content="@gamestore">
  <meta name="twitter:creator" content="@gamestore">
  
  <!-- Apple Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="GameStore">
  
  <!-- Microsoft Meta Tags -->
  <meta name="msapplication-TileColor" content="#220033">
  <meta name="msapplication-config" content="browserconfig.xml">
  
  <!-- Favicons and Icons -->
  <link rel="icon" type="image/x-icon" href="icon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="manifest.json">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://gamestore.com">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
  
  <!-- Estilos inline para asegurar que el tema se aplique correctamente -->
  <style>
    /* Estilos base - Dark Theme */
    body {
      font-family: 'VT323', monospace;
      margin: 0;
      padding: 0;
      background-color: #220033;
      color: #00ff99;
      transition: background-color 0.3s ease, color 0.3s ease;
      text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
      background-image: 
        linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Dark Theme (Purple/Green) */
    html.dark-theme,
    body.dark-theme {
      background-color: #220033;
      color: #00ff99;
      background-image: 
        linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Retro Theme (Modern Dark) */
    html.retro-theme,
    body.retro-theme {
      background-color: #121212;
      color: #f5f5f7;
      background-image: 
        linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Efecto scanline */
    body::after {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15),
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 9999;
    }
    
    /* Estilos de texto para tema Dark */
    body.dark-theme p {
      color: #ff00ff;
    }
    
    body.dark-theme h1,
    body.dark-theme h2,
    body.dark-theme h3,
    body.dark-theme h4,
    body.dark-theme h5,
    body.dark-theme h6 {
      color: #00ffaa;
      font-family: 'Press Start 2P', cursive;
      text-transform: uppercase;
    }
    
    body.dark-theme a:not(.btn) {
      color: #ff00ff;
    }
    
    /* Estilos de texto para tema Retro */
    body.retro-theme p {
      color: #b0b0b0;
    }
    
    body.retro-theme h1,
    body.retro-theme h2,
    body.retro-theme h3,
    body.retro-theme h4,
    body.retro-theme h5,
    body.retro-theme h6 {
      color: #ffffff;
      font-family: 'Press Start 2P', cursive;
      text-transform: uppercase;
    }
    
    body.retro-theme a:not(.btn) {
      color: #ff6b8b;
    }
  </style>
  <script src="https://www.paypal.com/sdk/js?client-id=AZjIdAwwDYaEWYersqOVudynQvixRr4Ybdw3kCsnnwT-xzKq5ShBmYYuU9ckBa1a3vJeK5myMAJIC-0H&currency=MXN"></script>
</head>
<body class="dark-theme">
  <app-root></app-root>
  

  
  <script>
    // Función para cambiar el tema - ahora para debugging
    function setThemeManually(theme) {
      const html = document.documentElement;
      const body = document.body;
      
      console.log(`Aplicando tema manualmente: ${theme}`);
      
      // Remover todas las clases de tema
      html.classList.remove('dark-theme', 'retro-theme', 'grayscale-theme');
      body.classList.remove('dark-theme', 'retro-theme', 'grayscale-theme');
      
      // Aplicar el tema seleccionado
      if (theme === 'dark') {
        html.classList.add('dark-theme');
        body.classList.add('dark-theme');
        body.style.backgroundColor = '#220033';
        body.style.color = '#00ff99';
        body.style.backgroundImage = 'linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px)';
      } else if (theme === 'retro') {
        html.classList.add('retro-theme');
        body.classList.add('retro-theme');
        body.style.backgroundColor = '#121212';
        body.style.color = '#f5f5f7';
        body.style.backgroundImage = 'linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px)';
      } else if (theme === 'grayscale') {
        html.classList.add('grayscale-theme');
        body.classList.add('grayscale-theme');
        body.style.backgroundColor = '#2a2a2a';
        body.style.color = '#e0e0e0';
        html.style.filter = 'grayscale(100%)';
      }
      
      localStorage.setItem('theme', theme);
      console.log(`Tema ${theme} aplicado y guardado en localStorage`);
      
      // Aplicar estilos a componentes clave
      applyThemeToComponents(theme);
    }
    
    // Aplicar estilos a componentes clave
    function applyThemeToComponents(theme) {
      // Aplicar estilos al header
      const header = document.querySelector('header');
      if (header) {
        if (theme === 'dark') {
          header.style.backgroundColor = '#330066';
          header.style.borderBottom = '3px solid #00ffaa';
        } else if (theme === 'retro') {
          header.style.backgroundColor = '#0f0f1a';
          header.style.borderBottom = '3px solid #444444';
        } else if (theme === 'grayscale') {
          header.style.backgroundColor = '#1a1a1a';
          header.style.borderBottom = '3px solid #666666';
        }
      }
      
      // Aplicar estilos al footer
      const footer = document.querySelector('footer');
      if (footer) {
        if (theme === 'dark') {
          footer.style.backgroundColor = '#330066';
          footer.style.borderTop = '3px solid #00ffaa';
        } else if (theme === 'retro') {
          footer.style.backgroundColor = '#0f0f1a';
          footer.style.borderTop = '3px solid #444444';
        } else if (theme === 'grayscale') {
          footer.style.backgroundColor = '#1a1a1a';
          footer.style.borderTop = '3px solid #666666';
        }
      }
      
      // Aplicar estilos a las tarjetas de juegos
      const gameCards = document.querySelectorAll('.game-card');
      gameCards.forEach(card => {
        if (theme === 'dark') {
          card.style.backgroundColor = '#440066';
          card.style.color = '#00ff99';
          card.style.border = '3px solid #00ffaa';
          card.style.boxShadow = '0 0 0 4px #ff00ff, 0 0 0 8px #330066';
        } else if (theme === 'retro') {
          card.style.backgroundColor = '#1e1e1e';
          card.style.color = '#f5f5f7';
          card.style.border = '3px solid #444444';
          card.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.3)';
        } else if (theme === 'grayscale') {
          card.style.backgroundColor = '#333333';
          card.style.color = '#e0e0e0';
          card.style.border = '3px solid #666666';
          card.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.3)';
        }
      });
      
      // Aplicar estilos a los inputs
      const inputs = document.querySelectorAll('input, select, textarea');
      inputs.forEach(input => {
        if (theme === 'dark') {
          input.style.backgroundColor = '#220044';
          input.style.color = '#00ff99';
          input.style.borderColor = '#00ffaa';
        } else if (theme === 'retro') {
          input.style.backgroundColor = '#2d2d2d';
          input.style.color = '#f5f5f7';
          input.style.borderColor = '#444444';
        } else if (theme === 'grayscale') {
          input.style.backgroundColor = '#404040';
          input.style.color = '#f0f0f0';
          input.style.borderColor = '#777777';
        }
      });
      
      // Aplicar estilos a los textos
      applyThemeToComponents(theme);
    }
    
    // Aplicar estilos a textos
    function applyTextStyles(theme) {
      let textSecondary, linkColor, headingColor;
      
      // Definir colores según el tema
      if (theme === 'dark') {
        textSecondary = '#ff00ff';
        linkColor = '#ff00ff';
        headingColor = '#00ffaa';
      } else if (theme === 'retro') {
        textSecondary = '#b0b0b0';
        linkColor = '#ff6b8b';
        headingColor = '#ffffff';
      } else if (theme === 'grayscale') {
        textSecondary = '#b0b0b0';
        linkColor = '#cccccc';
        headingColor = '#f0f0f0';
      }
      
      // Aplicar estilos a párrafos
      const paragraphs = document.querySelectorAll('p');
      paragraphs.forEach(p => {
        p.style.color = textSecondary;
      });
      
      // Aplicar estilos a títulos
      const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
      headings.forEach(heading => {
        heading.style.color = headingColor;
        heading.style.fontFamily = "'Press Start 2P', cursive";
        heading.style.textTransform = "uppercase";
      });
      
      // Aplicar estilos a enlaces
      const links = document.querySelectorAll('a:not(.btn)');
      links.forEach(link => {
        link.style.color = linkColor;
      });
      
      // Aplicar estilos a spans
      const spans = document.querySelectorAll('span:not(.cart-count)');
      spans.forEach(span => {
        if (!span.closest('button')) {
          span.style.color = textSecondary;
        }
      });
    }
    
    // Verificar tema al cargar
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      const html = document.documentElement;
      const body = document.body;
      
      console.log(`Tema guardado en localStorage: ${savedTheme}`);
      console.log(`Clases actuales en HTML: ${html.className}`);
      console.log(`Clases actuales en BODY: ${body.className}`);
      
      // Aplicar tema guardado o por defecto
      if (savedTheme && ['dark', 'retro', 'grayscale'].includes(savedTheme)) {
        console.log(`Aplicando tema ${savedTheme} desde localStorage`);
        setThemeManually(savedTheme);
        
        // Aplicar estilos a componentes
        setTimeout(() => {
          applyThemeToComponents(savedTheme);
        }, 500);
      }
    });
  </script>
  
  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then((registration) => {
            console.log('Service Worker registrado exitosamente:', registration.scope);
            
            // Check for updates
            registration.addEventListener('updatefound', () => {
              const newWorker = registration.installing;
              newWorker.addEventListener('statechange', () => {
                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                  // New service worker available, show update notification
                  console.log('Nueva versión disponible. Recarga la página para actualizar.');
                }
              });
            });
          })
          .catch((error) => {
            console.log('Error al registrar Service Worker:', error);
          });
      });
    }
    
    // Structured Data (JSON-LD) for SEO
    const structuredData = {
      "@context": "https://schema.org",
      "@type": "Store",
      "name": "GameStore",
      "description": "Tu tienda online de videojuegos retro y modernos",
      "url": "https://gamestore.com",
      "logo": "https://gamestore.com/icon.png",
      "image": "https://gamestore.com/assets/og-image.jpg",
      "priceRange": "$$",
      "address": {
        "@type": "PostalAddress",
        "addressCountry": "ES"
      },
      "sameAs": [
        "https://www.facebook.com/gamestore",
        "https://www.twitter.com/gamestore",
        "https://www.instagram.com/gamestore"
      ]
    };
    
    const script = document.createElement('script');
    script.type = 'application/ld+json';
    script.text = JSON.stringify(structuredData);
    document.head.appendChild(script);
  </script>
</body>
</html>
