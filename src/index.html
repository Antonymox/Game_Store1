<!doctype html>
<html lang="en" class="dark-theme">
<head>
  <meta charset="utf-8">
  <title>GameStore</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="icon.png">
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
  
  <!-- Estilos inline para asegurar que el tema se aplique correctamente -->
  <style>
    /* Estilos base - Dark Theme */
    body {
      font-family: 'VT323', monospace;
      margin: 0;
      padding: 0;
      background-color: #220033;
      color: #00ff99;
      transition: background-color 0.3s ease, color 0.3s ease;
      text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
      background-image: 
        linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Dark Theme (Purple/Green) */
    html.dark-theme,
    body.dark-theme {
      background-color: #220033;
      color: #00ff99;
      background-image: 
        linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Retro Theme (Modern Dark) */
    html.retro-theme,
    body.retro-theme {
      background-color: #121212;
      color: #f5f5f7;
      background-image: 
        linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
      background-size: 20px 20px;
    }
    
    /* Efecto scanline */
    body::after {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.15),
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 9999;
    }
    
    /* Estilos de texto para tema Dark */
    body.dark-theme p {
      color: #ff00ff;
    }
    
    body.dark-theme h1,
    body.dark-theme h2,
    body.dark-theme h3,
    body.dark-theme h4,
    body.dark-theme h5,
    body.dark-theme h6 {
      color: #00ffaa;
      font-family: 'Press Start 2P', cursive;
      text-transform: uppercase;
    }
    
    body.dark-theme a:not(.btn) {
      color: #ff00ff;
    }
    
    /* Estilos de texto para tema Retro */
    body.retro-theme p {
      color: #b0b0b0;
    }
    
    body.retro-theme h1,
    body.retro-theme h2,
    body.retro-theme h3,
    body.retro-theme h4,
    body.retro-theme h5,
    body.retro-theme h6 {
      color: #ffffff;
      font-family: 'Press Start 2P', cursive;
      text-transform: uppercase;
    }
    
    body.retro-theme a:not(.btn) {
      color: #ff6b8b;
    }
  </style>
</head>
<body class="dark-theme">
  <app-root></app-root>
  

  
  <script>
    // Función para cambiar el tema - ahora para debugging
    function setThemeManually(theme) {
      const html = document.documentElement;
      const body = document.body;
      
      console.log(`Aplicando tema manualmente: ${theme}`);
      
      // Remover todas las clases de tema
      html.classList.remove('dark-theme', 'retro-theme', 'grayscale-theme');
      body.classList.remove('dark-theme', 'retro-theme', 'grayscale-theme');
      
      // Aplicar el tema seleccionado
      if (theme === 'dark') {
        html.classList.add('dark-theme');
        body.classList.add('dark-theme');
        body.style.backgroundColor = '#220033';
        body.style.color = '#00ff99';
        body.style.backgroundImage = 'linear-gradient(rgba(255, 0, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 0, 255, 0.05) 1px, transparent 1px)';
      } else if (theme === 'retro') {
        html.classList.add('retro-theme');
        body.classList.add('retro-theme');
        body.style.backgroundColor = '#121212';
        body.style.color = '#f5f5f7';
        body.style.backgroundImage = 'linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px)';
      } else if (theme === 'grayscale') {
        html.classList.add('grayscale-theme');
        body.classList.add('grayscale-theme');
        body.style.backgroundColor = '#2a2a2a';
        body.style.color = '#e0e0e0';
        html.style.filter = 'grayscale(100%)';
      }
      
      localStorage.setItem('theme', theme);
      console.log(`Tema ${theme} aplicado y guardado en localStorage`);
      
      // Aplicar estilos a componentes clave
      applyThemeToComponents(theme);
    }
    
    // Aplicar estilos a componentes clave
    function applyThemeToComponents(theme) {
      // Aplicar estilos al header
      const header = document.querySelector('header');
      if (header) {
        if (theme === 'dark') {
          header.style.backgroundColor = '#330066';
          header.style.borderBottom = '3px solid #00ffaa';
        } else if (theme === 'retro') {
          header.style.backgroundColor = '#0f0f1a';
          header.style.borderBottom = '3px solid #444444';
        } else if (theme === 'grayscale') {
          header.style.backgroundColor = '#1a1a1a';
          header.style.borderBottom = '3px solid #666666';
        }
      }
      
      // Aplicar estilos al footer
      const footer = document.querySelector('footer');
      if (footer) {
        if (theme === 'dark') {
          footer.style.backgroundColor = '#330066';
          footer.style.borderTop = '3px solid #00ffaa';
        } else if (theme === 'retro') {
          footer.style.backgroundColor = '#0f0f1a';
          footer.style.borderTop = '3px solid #444444';
        } else if (theme === 'grayscale') {
          footer.style.backgroundColor = '#1a1a1a';
          footer.style.borderTop = '3px solid #666666';
        }
      }
      
      // Aplicar estilos a las tarjetas de juegos
      const gameCards = document.querySelectorAll('.game-card');
      gameCards.forEach(card => {
        if (theme === 'dark') {
          card.style.backgroundColor = '#440066';
          card.style.color = '#00ff99';
          card.style.border = '3px solid #00ffaa';
          card.style.boxShadow = '0 0 0 4px #ff00ff, 0 0 0 8px #330066';
        } else if (theme === 'retro') {
          card.style.backgroundColor = '#1e1e1e';
          card.style.color = '#f5f5f7';
          card.style.border = '3px solid #444444';
          card.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.3)';
        } else if (theme === 'grayscale') {
          card.style.backgroundColor = '#333333';
          card.style.color = '#e0e0e0';
          card.style.border = '3px solid #666666';
          card.style.boxShadow = '0 4px 10px rgba(0, 0, 0, 0.3)';
        }
      });
      
      // Aplicar estilos a los inputs
      const inputs = document.querySelectorAll('input, select, textarea');
      inputs.forEach(input => {
        if (theme === 'dark') {
          input.style.backgroundColor = '#220044';
          input.style.color = '#00ff99';
          input.style.borderColor = '#00ffaa';
        } else if (theme === 'retro') {
          input.style.backgroundColor = '#2d2d2d';
          input.style.color = '#f5f5f7';
          input.style.borderColor = '#444444';
        } else if (theme === 'grayscale') {
          input.style.backgroundColor = '#404040';
          input.style.color = '#f0f0f0';
          input.style.borderColor = '#777777';
        }
      });
      
      // Aplicar estilos a los textos
      applyTextStyles(theme);
    }
    
    // Aplicar estilos a textos
    function applyTextStyles(theme) {
      let textSecondary, linkColor, headingColor;
      
      // Definir colores según el tema
      if (theme === 'dark') {
        textSecondary = '#ff00ff';
        linkColor = '#ff00ff';
        headingColor = '#00ffaa';
      } else if (theme === 'retro') {
        textSecondary = '#b0b0b0';
        linkColor = '#ff6b8b';
        headingColor = '#ffffff';
      } else if (theme === 'grayscale') {
        textSecondary = '#b0b0b0';
        linkColor = '#cccccc';
        headingColor = '#f0f0f0';
      }
      
      // Aplicar estilos a párrafos
      const paragraphs = document.querySelectorAll('p');
      paragraphs.forEach(p => {
        p.style.color = textSecondary;
      });
      
      // Aplicar estilos a títulos
      const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
      headings.forEach(heading => {
        heading.style.color = headingColor;
        heading.style.fontFamily = "'Press Start 2P', cursive";
        heading.style.textTransform = "uppercase";
      });
      
      // Aplicar estilos a enlaces
      const links = document.querySelectorAll('a:not(.btn)');
      links.forEach(link => {
        link.style.color = linkColor;
      });
      
      // Aplicar estilos a spans
      const spans = document.querySelectorAll('span:not(.cart-count)');
      spans.forEach(span => {
        if (!span.closest('button')) {
          span.style.color = textSecondary;
        }
      });
    }
    
    // Verificar tema al cargar
    document.addEventListener('DOMContentLoaded', function() {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      const html = document.documentElement;
      const body = document.body;
      
      console.log(`Tema guardado en localStorage: ${savedTheme}`);
      console.log(`Clases actuales en HTML: ${html.className}`);
      console.log(`Clases actuales en BODY: ${body.className}`);
      
      // Aplicar tema guardado o por defecto
      if (savedTheme && ['dark', 'retro', 'grayscale'].includes(savedTheme)) {
        console.log(`Aplicando tema ${savedTheme} desde localStorage`);
        setThemeManually(savedTheme);
        
        // Aplicar estilos a componentes
        setTimeout(() => {
          applyThemeToComponents(savedTheme);
        }, 500);
      }
    });
  </script>
</body>
</html>
